<!DOCTYPE html>
<html>
<head>
  <title>Spotify Auth Demo</title>
</head>
<body>
  <button id="login">Login with Spotify</button>

  <script>
    const clientId = 'b2bee85f176549668d85bc8c6d9c232c';
    const redirectUri = 'https://ihasbrains010.github.io/ai-playlist-creater/';
    const scopes = 'user-read-private user-read-email';

    document.getElementById('login').addEventListener('click', () => {
      const authUrl = `https://accounts.spotify.com/authorize?response_type=token&client_id=${clientId}&scope=${encodeURIComponent(scopes)}&redirect_uri=${encodeURIComponent(redirectUri)}`;
      window.location.href = authUrl;
    });

    // Token catcher
    window.onload = () => {
      if (window.location.hash) {
        const hash = window.location.hash.substring(1);
        const params = new URLSearchParams(hash);
        const token = params.get('access_token');
        if (token) {
          document.body.innerHTML = `<h2>âœ… Logged In</h2><p>Token:</p><code>${token}</code>`;
          // Example API call
          fetch('https://api.spotify.com/v1/me', {
            headers: { 'Authorization': 'Bearer ' + token }
          })
          .then(res => res.json())
          .then(data => {
            document.body.innerHTML += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
          });
        }
      }
    };
  </script>
</body>
</html>
